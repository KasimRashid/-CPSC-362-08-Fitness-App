<!DOCTYPE html>
<html lang="en">

<head><!--Copy from Kasim's Homepage-->
  <!--<script src="addAchievement.js"></script>-->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fitness App: Add Achievement</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="addAchievement.css">
  </head>
<body>
<center>
  <h1 class="gradient">Achievement</h1>
  <h2 id="welcome" style="text-align:center; font-family:'Times New Roman', serif; color:#1F618D;"></h2>

<Br>
<button class="page-btn" id="previousPageButton">Back to Homepage</button> <!--href is for attribute (a tag)-->
<!--<button class="page-btn" id="nextPageButton">Next page</button>-->

</center>


<style>
.header {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 0px;
}

.page-buttons-group {
  display: flex;
  gap: 10px; /*gap btw buttons*/
  margin-top: 0px;
}

.title {
  background-color: #1F618D; /* blue */
  line-height: 50px;
  -webkit-text-fill-color: transparent; /*colored the word with color above*/
  background-clip: text;
  text-fill-color: transparent;
  display: inline-block;
  font-size: 50px;
  font-family: 'Nunito', Nunito;
  font-weight: 700; /*bolder the text*/
  margin-bottom: 5px; /*keep title and buttons have accepable gap*/
}

.container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px; /* gap*/
  padding: 20px;
}

.image-box img {
  position: absolute; /*not move*/
  top:50%;
  left:15%;
  transform: translate(-50%,-50%);
}

.form-box {
  font-family: "Times New Roman", serif;
  font-size:18px;
  position: absolute;
  top:60%;
  left:42%;
  transform: translate(-50%,-50%);
  color:#333;
}

.table-box {
  flex-direction: column; /*stacked them vertical*/
  align-items: center; /*center them horizontal*/
  position: absolute;
  top:50%;
  left:75%;
  transform: translate(-50%,-50%);
}

.page-button {
  background-color: #D4AC0D; /* yellow */
  color: white;
  border: none;
  padding: 5px 8px; /* smaller button */
  font-size: 16px;
  font-family: "Times New Roman", serif;
  font-weight: bold; /* makes the text bold */
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.text{
color = #1F618D;
font-size: 22px;
font-family: "Verdana", Tahoma;
}

.button {
  background-color: #1F618D; /* blue */
  color: white;
  border: none;
  padding: 5px 8px; /* smaller button than total, same size as page-button */
  font-size: 16px;
  font-family: "Times New Roman", serif;
  font-weight: bold; /* makes the text bold */
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.button-red {
  background-color: #D03D2F; /* same as button, just red :D */
  color: white;
  border: none;
  padding: 5px 8px; /* smaller button than total, same size as page-button */
  font-size: 16px;
  font-family: "Times New Roman", serif;
  font-weight: bold; /* makes the text bold */
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.button:disabled {
  background-color: #cccccc; /* light gray */
  color: #090D10; /* black */
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}

.sum-button {
  background-color: #D03D2F; /* red*/
  color: white;
  border: none;
  padding: 6px 12px; /* bigger button */
  font-size: 16px;
  font-family: "Times New Roman", serif;
  font-weight: bold; 
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  transition: background-color 0.3s ease, transform 0.2s ease;
}

input[type="text"], input[type="number"], input[type="email"], select {
  outline: none;  
  border-radius: 10px;       
  border: 1px solid blue; 
  padding: 6px;              
  
           
}
</style>

<script>
document.getElementById("previousPageButton").onclick = function() {
            window.location.href = "homepage.html";
        };
</script>

<div class="container">
  <div class="image-box">
    <img src="trophy.png" width="200" height="300" alt="Anime Trophy">
</div>

<div class="form-box">
<!--<big><label for="fitnessActivities" font-family:'Inter', system-ui, sans-serif;">Choose your activities:</label></big>-->
<p style="display: inline; font-family: 'Inter', system-ui, sans-serif;"><big>Choose your activities:</big></p> <!--Big inside p, delete label for attribute p to active-->

<!--Not fix this one, because the item MUST have name to calculate!!-->
<select id="fitnessActivities" name="fitnessActivities" style="background-color:#90CAF9; color: black; font-weight: bold;" onchange="showSelected()">
  <option value="[not selected yet]" disabled selected>choose activities</option> <!--must be 1st option-->
  <option value="squatting">Squatting</option>
  <option value="benching">Benching</option>
  <option value="curling">Curling</option>
  <option value="leg pressing">Leg pressing</option>
  <option value="deadlifting">Deadlifting</option>
  
</select>

<h3 id="output" style="color: green; margin-top: 16px; font-family:'Inter', system-ui, sans-serif;"></h3>

<form onsubmit="return false;">
  <!--<big><label for="weightInput">Please enter your weight, in pound:</label><br></big>-->
  <p style="font-family: 'Inter', system-ui, sans-serif;"><big>Please enter your weight, in pound:<br></big></p> <!--Why have gap? Do not put br after p!!-->
  <input type="text" id="weightInput" style="background-color:#90CAF9; color: black; font-weight: bold;" name="myText" placeholder="Type here..." maxlength="4" autocomplete="off">
  <button id="yourWeightSubmitButton" class="btn-submit" onclick="displayWeight()">Submit</button>
</form>
<h3 id="output3" style="color: green; margin-top: 16px; font-family:'Inter', system-ui, sans-serif;"></h3>

<form onsubmit="return false;">
  <!--<big><label for="weightLiftInput">How much weight do you lift, in pound:</label><br></big>-->
 <p style="font-family: 'Inter', system-ui, sans-serif;"><big>How much weight do you lift, in pound:<br></big></p>
  <input type="text" id="weightLiftInput" name="myText2" style="background-color:#90CAF9; color: black; font-weight: bold;" placeholder="Type here..." maxlength="3" autocomplete="off">
  <button class="btn-submit" onclick="displayLiftedWeight()">Submit</button>
</form>
<h3 id="output5" style="color: green; margin-top: 16px; font-family:'Inter', system-ui, sans-serif;"></h3>

  <script>
    function displayWeight() {
      const weight = document.getElementById("weightInput").value;
      const output3 = document.getElementById("output3");

      if (weight > 0 && weight <= 1440) { //1440 lb is world-record
        output3.innerText = "Your weight is: " + weight + " lbs";
      } else {
        output3.innerText = "Please enter a valid weight.";
      }
    }

    function displayLiftedWeight() {
      const weightLifted = document.getElementById("weightLiftInput").value;
      const output5 = document.getElementById("output5");

      if (weightLifted > 0 && weightLifted <= 5340) { //5340 is world-record
        output5.innerText = "You lifted: " + weightLifted + " lbs";
      } else {
        output5.innerText = "Please enter a valid weight.";
      }
    }
</script>

<form onsubmit="return false;">
  <!--<big><label for="liftRepsInput">How many reps:</label><br></big>-->
  <p style="font-family: 'Inter', system-ui, sans-serif;"><big>How many reps:<br></big></p>
  <input type="text" id="liftRepsInput" name="myText3" style="background-color:#90CAF9; color: black; font-weight: bold;" placeholder="Type here..." maxlength="2" autocomplete="off">
  <button class="btn-submit" onclick="displayLiftReps()">Submit</button>
</form>
<h3 id="output7" style="color: green; margin-top: 16px; font-family:'Inter', system-ui, sans-serif;"></h3>

  <script>
    function displayLiftReps() {
      const reps = document.getElementById("liftRepsInput").value;
      const output3 = document.getElementById("output7");

      if (reps > 0 && reps <= 99) { //max set to be 99
        output7.innerText = "Total: " + reps + " reps";
      } else {
        output7.innerText = "Please enter a valid reps.";
      }
    }
  </script>

<h3 id="output2" style="color: green; margin-top: 16px; font-family:'Inter', system-ui, sans-serif;"></h3>

<form onsubmit="return false;">
  <!--<button id="calculation" onclick="displayPoint()">Calculate my point</button>-->
  <button class="btn-blue" id="calculation" onclick="handleClick()">Calculate</button>
  <!--<button id="addActivities" onclick="unblockTypeIn()">Add more activities</button>-->
  <!--<button id="addActivities" onclick="displayPoint2()">Add more activities</button>-->
  <button class="btn-blue" id="addActivities" onclick="unblockTypeIn()">Add more activities</button>
  <button class="btn" id="addAchievementButton" onclick="addAchievements()">Add Achievement</button>
  <br>
  <!--<red><label for="pointOutput">Your rewarded point:</label><br></red>-->
  <p style="font-family: 'Inter', system-ui, sans-serif;"><red><big>Your rewarded point:</big><br></red></p>
</form>

<h3 id="output4" style="color: orange; margin-top: 20px; font-family:'Inter', system-ui, sans-serif;"></h3>
</div>

<!--<a href="homePage.html">Homepage (direct HTML link)</a>-->

<style>
table {
  width: 40%;
}

table, th, td {
  border: 1px solid #ff6b6b;
 border-collapse: collapse;  /*decided to delete double-border lines*/
}

th, td {
  text-align: center; /*center horizontal*/
  vertical-align: middle;
  padding: 8px;       
}

th:last-child,
td:last-child {
  font-weight: bold; /*bold the point column*/
  font-size: 1.2em; /*a little bigger*/
  color: #ff6b6b /*mark the point all red-looking with the color from the button*/
}
</style>

<div class="table-box">
<h2 style="color: green; text-align: center;">Awarded activities</h2>
<table id="pointTable" style="width:40%">
  <thead>
    <tr>
      <th>Activity</th>
      <th>Weight</th>
      <th>Lifted</th>
      <th>Reps</th>
      <th>Points</th>
    </tr>
  </thead>
  <tbody>
    <!-- Rows will be added here -->
  </tbody>
</table>

<br>
<button id="sumPoint" class="btn" onclick="calculateSumPoint()">Total Point</button>
<h3 id="outputSumPoint" style="color: red; margin-top: 20px; font-family:'Inter', system-ui, sans-serif;"></h3>
</div>

<script>
function blockTypeIn () {
   // Unblock all text inputs
   const textFields2 = document.querySelectorAll('input');
   textFields2.forEach(field => field.disabled = true);

   // Unblock all drop-downs
   const dropdowns2 = document.querySelectorAll('select');
   dropdowns2.forEach(menu => menu.disabled = true);

  //Leave the weight alone :D, block the button :D
  document.getElementById("weightInput").disabled = true;
  document.getElementById("yourWeightSubmitButton").disabled =true;
  
  document.getElementById("calculation").disabled=false;

  document.getElementById("fitnessActivities").value ="";
  //document.getElementById("weightInput").value="";
  document.getElementById("liftRepsInput").value="";
  document.getElementById("weightLiftInput").value="";

  const output4 = document.getElementById("output4");
  output4.innerText = ""; //Clear the "your point" due to the need to re-calculate
}

function unblockTypeIn () {
  // Unblock all text inputs
   const textFields2 = document.querySelectorAll('input');
   textFields2.forEach(field => field.disabled = false);

   // Unblock all drop-downs
   const dropdowns2 = document.querySelectorAll('select');
   dropdowns2.forEach(menu => menu.disabled = false);

  //Leave the weight alone :D, block the button :D
  document.getElementById("weightInput").disabled =true;
  document.getElementById("yourWeightSubmitButton").disabled =true;

  //The calculate-recalculate button
  document.getElementById("calculation").disabled=false;

  document.getElementById("fitnessActivities").value ="";
  //document.getElementById("weightInput").value="";
  document.getElementById("liftRepsInput").value="";
  document.getElementById("weightLiftInput").value="";

  const output4 = document.getElementById("output4");
  output4.innerText = ""; //Clear the "your point" due to the need to re-calculate
  outputSumPoint.innerText = "";//Clear the "total point" 
}
</script>

<script>
function handleClick() {
  const button = document.getElementById("calculation");
  const label = button.innerHTML;

  if (label === "Calculate") {
    calculate(); // Run calculation first
    button.innerHTML = "Re-calculate";
   button.disabled=true;
  } 
 else if (label === "Re-calculate") {
    button.disabled = false;
      recalculate(); 
    blockTypeIn();  
    button.disabled = true;   
    }
  }
function calculate() {
  //alert("Calculating...");

  const activities = document.getElementById("fitnessActivities").value;
  const weight = parseFloat(document.getElementById("weightInput").value);
  const weightLifted = parseFloat(document.getElementById("weightLiftInput").value);
  const reps = parseInt(document.getElementById("liftRepsInput").value);

  //valid?
  if (!activities || isNaN(weight) || isNaN(weightLifted) || isNaN(reps)) {
    alert("Please fill in all fields correctly.");
    return;
  }
  
  blockTypeIn();

  const point = Math.round((weight * reps * weightLifted) / 7000);
  document.getElementById("output4").innerText = "Your point: " + point;

  //Creat rows
  const tableBody = document.querySelector("#pointTable tbody");
  const newRow = document.createElement("tr");

  newRow.innerHTML = `
    <td>${activities}</td>
    <td>${weight}</td>
    <td>${weightLifted}</td>
    <td>${reps}</td>
    <td>${point}</td>
  `;

  tableBody.appendChild(newRow);

  
}

  function recalculate() {
    alert("Re-calculating...");
     calculate();
     unblockTypeIn();
  }

function calculateSumPoint() {
  const table = document.getElementById("pointTable");
  let sum = 0;

  //first row is title
  for (let i = 1; i < table.rows.length; i++) {
    const cell = table.rows[i].cells[4]; // colum of point is 5, index 4
    const value = parseInt(cell.textContent);
    if (!isNaN(value)) {
      sum += value;
    }
  const outputSumPoint = document.getElementById("outputSumPoint");
  document.getElementById("outputSumPoint").innerText = "Your total point: " + sum;
  }
  
}
</script>
<script>
window.onload = function() {
  const activityDropdown = document.getElementById("fitnessActivities");
  activityDropdown.selectedIndex = 0; // first option
};
</script>
<script>
window.addEventListener("DOMContentLoaded", () => {
  const user = localStorage.getItem("currentUser");
  const welcomeElement = document.getElementById("welcome");

  if (welcomeElement) {
    if (user) {
      welcomeElement.textContent = `Welcome, ${user}!`;
    } else {
      welcomeElement.textContent = "Welcome, Guest!";
    }
  } else {
    console.error("Couldn't find the #welcome element on the page.");
  }
});
</script>

  <script src="addachievement.js"></script>

</body>
</html>